{% extends 'base.html' %} 

{% block page_title %}Edit Recipe{% endblock %}

{% block page_heading %}Edit Recipe
{% endblock %}
{% block content %}
<h3>Edit Your Recipe</h3>

<div class="row">
  <form action="{{ url_for('update_recipe', recipe_id=recipe._id) }}" method="POST" class="col s12">
    <!--Recipe Title-->
    <div class="row">
      <div class="input-field col s12">
        <i class="material-icons prefix">restaurant</i>
        <input id="recipe_name" name="recipe_name" type="text" class="validate" value="{{recipe.recipe_name}}">
        <label for="icon_prefix">Title</label>
      </div>
    </div>
    <!--Brief Description-->
    <div class="row">
      <div class="input-field col s12">
        <i class="material-icons prefix">subject</i>
        <input id="brief_description" name="brief_description" type="tel" class="validate" value="{{recipe.brief_description}}">
        <label for="icon_telephone">Short Description</label>
      </div>
    </div>
    <!--Catergories-->
    <div class="row">
      <div class="input-field col s6">
        <i class="material-icons prefix">poll</i>
        <select id="category_name" name="category_name">
          <option value="" disabled selected>Choose category</option>
          {% for cat in categories %}
          {% if cat.category_name == recipe.category_name %}
          <option value="{{cat.category_name}}" selected >{{cat.category_name}}</option>
          {% else %}
          <option value="{{cat.category_name}}">{{cat.category_name}}</option>
          {% endif %}
          {% endfor %}
        </select>
        <label>Category</label>
      </div>

      <!--Allergens-->

      <div class="input-field col s6">
        <i class="material-icons prefix">priority_high</i>
        <select multiple id="allergen_name" name="allergen_name">
          <option value="" disabled selected>Choose allergen</option>
          {% for allergy in allergens %}
          {% if allergy.allergen_name == recipe.allergen_name %}
          <option value="{{allergy.allergen_name}}" selected >{{allergy.allergen_name}}</option>
          {% else %}
          <option value="{{allergy.allergen_name}}">{{allergy.allergen_name}}</option>
          {% endif %}
          {% endfor %}
        </select>
        <label>Allergens</label>
      </div>
    </div>
    <!--Preparation Time-->
    <div class="row">
      <div class="input-field col s6">
        <i class="material-icons prefix">schedule</i>
        <input id="prep_time" name="prep_time" type="text" class="timepicker" value="{{recipe.prep_time}}">
        <label for="icon_prefix">Preparation Time</label>
      </div>
      <!--Cooking Time-->
      <div class="input-field col s6">
        <i class="material-icons prefix">schedule</i>
        <input id="cook_time" name="cook_time" type="text" class="timepicker" value="{{recipe.cook_time}}">
        <label for="icon_prefix">Cooking Time</label>
      </div>
    </div>
    <!--Serves-->
    <div class="row">
      <div class="input-field col s12">
        <i class="material-icons prefix">poll</i>
        <select id="amount_serves" name="amount_serves">
          <option value="" disabled selected>Choose how many the recipe serves</option>
          {% for num in serves %}
          {% if num.amount_serves == recipe.amount_serves %}
          <option value="{{num.amount_serves}}" selected>{{num.amount_serves}}</option>
          {% else %}
          <option value="{{num.amount_serves}}">{{num.amount_serves}}</option>
          {% endif %}
          {% endfor %}
        </select>
        <label>Serves</label>
      </div>
    </div>
    <!--image-->
    <div class="row">
      <div class="input-field col s12">
        <i class="material-icons prefix">center_focus_strong</i>
        <input id="image_file" name="image_file" type="text" class="validate" value="{{recipe.image_file}}">
        <label for="icon_prefix">Image Link (full link)</label>
      </div>
    </div>
    <h3>Add Your Ingredients</h3>
    <h4>Enter one ingredient at a time</h4>

    <div class="row">
      <!--Ingredients-->
      <div class="input-field col s12">
        <textarea id="ingredients" name="ingredients" class="ingredients">{{recipe.ingredients}}</textarea>
        <label for="textarea1">Ingredients (please add one ingredient on each new line)</label>
      </div>
    </div>

    <!--Method-->
    <h3>Add The Method</h3>
    <div class="row">
      <div class="input-field col s12">
        <textarea id="method_description" name="method_description" class="method_description">{{recipe.method_description}}</textarea>
        <label for="textarea1">Method Description</label>
      </div>
    </div>
    <div class="row">
      <button class="btn waves-effect waves-light" type="submit" name="action">Edit Recipe
    <i class="material-icons right">playlist_add</i>
  </button>
      <a href="{{url_for('delete_recipe', recipe_id=recipe._id)}}" class="waves-effect waves-light btn btn-sml blue delete_btn">Delete</a>
    </div>
  </form>

  {% endblock %}
