{% extends 'base.html' %} {% block content %}

<h3>Edit Your Recipe</h3>

<div class="row">
  <form action="{{ url_for('insert_recipe') }}" method="POST" class="col s12">
    <!--Recipe Title-->
    <div class="row">
      <div class="input-field col s12">
        <i class="material-icons prefix">restaurant</i>
        <input id="recipe_name" name="recipe_name" type="text" class="validate" value="{{recipe.recipe_name}}">
        <label for="icon_prefix">Title</label>
      </div>
    </div>
    <!--Brief Description-->
    <div class="row">
      <div class="input-field col s12">
        <i class="material-icons prefix">subject</i>
        <input id="brief_description" name="brief_description" type="tel" class="validate" value="{{recipe.brief_description}}">
        <label for="icon_telephone">Short Description</label>
      </div>
    </div>
    <!--Catergories-->
    <div class="row">
      <div class="input-field col s6">
        <i class="material-icons prefix">poll</i>
        <select id="category_name" name="category_name">
          <option value="" disabled selected>Choose category</option>
          {% for cat in categories %}
          {% if cat.category_name == recipe.category %}
          <option value="{{cat.category_name}}" selected >{{cat.category_name}}</option>
          {% else %}
          <option value="{{cat.category_name}}">{{cat.category_name}}</option>
          {% endif %}
          {% endfor %}
        </select>
        <label>Category</label>
      </div>

      <!--Allergens-->

      <div class="input-field col s6">
        <i class="material-icons prefix">priority_high</i>
        <select id="allergen_name" name="allergen_name">
          <option value="" disabled selected>Choose allergen</option>
          {% for allergy in allergens %}
          {% if allergy.allergen_name == recipe.allergen_name %}
          <option value="{{allergy.allergen_name}}" selected >{{allergy.allergen_name}}</option>
          {% else %}
          <option value="{{allergy.allergen_name}}">{{allergy.allergen_name}}</option>
          {% endif %}
          {% endfor %}
        </select>
        <label>Allergens</label>
      </div>
    </div>
    <!--Preparation Time-->
    <div class="row">
      <div class="input-field col s6">
        <i class="material-icons prefix">schedule</i>
        <input id="prep_time" name="prep_time" type="text" class="timepicker" value="{{recipe.prep_time}}">
        <label for="icon_prefix">Preparation Time</label>
      </div>
      <!--Cooking Time-->
      <div class="input-field col s6">
        <i class="material-icons prefix">schedule</i>
        <input id="cook_time" name="cook_time" type="text" class="timepicker" value="{{recipe.cook_time}}">
        <label for="icon_prefix">Cooking Time</label>
      </div>
    </div>
    <!--Serves-->
    <div class="row">
      <div class="input-field col s12">
        <i class="material-icons prefix">poll</i>
        <select id="amount_serves" name="amount_serves">
          <option value="" disabled selected>Choose how many the recipe serves</option>
          {% for num in serves %}
          {% if num.amount_serves == recipe.amount_serves %}
          <option value="{{num.amount_serves}}" selected>{{num.amount_serves}}</option>
          {% else %}
          <option value="{{num.amount_serves}}">{{num.amount_serves}}</option>
          {% endif %}
          {% endfor %}
        </select>
        <label>Serves</label>
      </div>
    </div>
    <!--image-->
    <div class="row">
      <div class="input-field col s12">
        <i class="material-icons prefix">center_focus_strong</i>
        <input id="image_file" name="image_file" type="text" class="validate" value="{{recipe.image_file}}">
        <label for="icon_prefix">Image Link (full link)</label>
      </div>
    </div>
    <h3>Add Your Ingredients</h3>
    <h4>Enter one ingredient at a time</h4>

    <div class="row">
        <!--Ingredient Title-->
        <div class="row">
          <div class="input-field col s12">
            <i class="material-icons prefix">restaurant</i>
            <input id="ingredient_name" name="ingredient_name" type="text" class="validate" value="{{recipe.ingredient_name}}">
            <label for="icon_prefix">Ingredient</label>
          </div>
        </div>
        <!--Amount-->
        <div class="row">
          <div class="input-field col s6">
            <i class="material-icons prefix">exposure_plus_1</i>
            <input id="amount" name="amount" type="text" class="validate" value="{{recipe.amount}}">
            <label for="icon_prefix">Amount</label>
          </div>

          <!--Measurement-->

          <div class="input-field col s6">
            <i class="material-icons prefix">poll</i>
            <select id="measure_type" name="measure_type">
          <option value="" disabled selected>Choose measurement</option>
          {% for measure in measurements %}
          {% if measure.measure_type == recipe.measure_type %}
           <option value="{{measure.measure_type}}" selected>{{measure.measure_type}}</option>
          {% else %}
          <option value="{{measure.measure_type}}">{{measure.measure_type}}</option>
          {% endif %}
          {% endfor %}
        </select>
            <label>Measurement</label>
          </div>
        </div>
        <!--Preparation-->
        <div class="row">
          <div class="input-field col s12">
            <i class="material-icons prefix">poll</i>
            <select id="prep_type" name="prep_type">
          <option value="" disabled selected>Choose preparation</option>
          {% for prep in preparation %}
          {% if prep.prep_type == recipe.prep_type %}
          <option value="{{prep.prep_type}}" selected>{{prep.prep_type}}</option>
          {% else %}
          <option value="{{prep.prep_type}}">{{prep.prep_type}}</option>
          {% endif %}
          {% endfor %}
        </select>
            <label>Preparation</label>
          </div>
        </div>
        <a class="waves-effect waves-light btn"><i class="material-icons right">playlist_add</i>Add more ingredients</a>
        
        <!--Method-->
        <h3>Add The Method</h3>
        <div class="row">
          <div class="input-field col s12">
            <textarea id="method_description" name="method_description" class="method_description">{{recipe.method_description}}</textarea>
            <label for="textarea1">Method Description</label>
          </div>
        </div>
        <div class="row">
          <button class="btn waves-effect waves-light" type="submit" name="action">Edit Task
    <i class="material-icons right">playlist_add</i>
  </button>
        </div>
        </form>

        {% endblock %}
